<html>
	<head>
		<link rel="stylesheet" href="style.css" />
		<title>Data debug theme</title>

		<script data-joshfire-bootstrap src="http://127.0.0.1:40021/bootstrap/4eca9a4157f7b0f3810000ee/auto/phone/" ></script>
	</head>
	<body>
		
		Select a datasource : <select onchange="datarefresh()" id="datalist"></select>

		<div id="datacontent">

		</div>


		<script>
		
			function datarefresh() {
				var key = document.getElementById("datalist").options[document.getElementById("datalist").selectedIndex].value;
				
				var ds;
				if( toString.call(Joshfire.factory.config.datasources[key]) == '[object Array]') {
					ds = Joshfire.factory.config.datasources[key][0];
				} else {
					ds = Joshfire.factory.config.datasources[key];
				}

				ds.find({},function(err,data) {
					document.getElementById("datacontent").innerHTML = JSON.stringify(data);
				});
			}

			// Load all the datasources in the select
			for (key in Joshfire.factory.config.datasources) {
				document.getElementById("datalist").innerHTML+="<option value='"+key+"'>"+key+"</option>";
			}

			datarefresh();
		</script>


	</body>
</html>